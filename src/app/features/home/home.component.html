<main>
    <div class="top-bar">
        <div class="search-box">
            <span class="search-icon">ğŸ”</span>
            <input 
                type="text" 
                placeholder="Pesquisar (ex: Pintor, Torre)" 
                [(ngModel)]="searchTerm"
                (input)="onSearch()">
        </div>

        <button class="publish-btn" (click)="goToPublish()">
            <span class="icon">ğŸ“„</span> Publicar Necessidade
        </button>
    </div>

    <section class="feed-container">
        @for (item of opportunities; track item.id) {
            <div class="opportunity-card">
                <div class="card-header">
                    <div class="user-info">
                        <img [src]="item.contractorAvatar" class="avatar">
                        <span class="name">{{ item.contractorName }}</span>
                        <img *ngIf="item.isVerified" src="/icons/sucess.svg" class="badge" width="14">
                    </div>
                    <span class="price">{{ item.price | currency:'BRL' }}</span>
                </div>

                <h3 class="card-title">{{ item.title }}</h3>
                <div class="location">
                    ğŸ“ {{ item.location }} <span class="time">â€¢ {{ item.timePosted }}</span>
                </div>

                <div class="description">
                    <p>{{ item.description }}</p>
                </div>

                <div class="card-images" *ngIf="item.images.length > 0">
                    @for (img of item.images; track $index) {
                        <img [src]="img" class="thumb">
                    }
                </div>

                <div class="card-footer">
                    <button class="icon-btn" title="Salvar">
                        ğŸ¤
                    </button>
                    <button class="icon-btn chat-btn" (click)="openChat(item.id)" title="Tenho Interesse">
                        ğŸ’¬ Tenho Interesse
                    </button>
                </div>
            </div>
        }
        
        @if (opportunities.length === 0) {
            <div class="empty-state">
                <p>Nenhuma oportunidade encontrada com esse termo.</p>
            </div>
        }
    </section>

    <nav class="bottom-nav">
        <button class="nav-item active">ğŸ </button>
        <button class="nav-item">ğŸ”</button>
        <button class="nav-item" (click)="openChat('0')">ğŸ’¬</button>
        <button class="nav-item">ğŸ‘¤</button>
    </nav>
</main>